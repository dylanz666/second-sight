# Second Sight - è¿œç¨‹æ¡Œé¢ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºŽFastAPIå’ŒWebSocketçš„å®žæ—¶Windowsæ¡Œé¢æˆªå›¾å’Œç›‘æŽ§å·¥å…·ï¼Œæ”¯æŒå¤šæ˜¾ç¤ºå™¨ç‹¬ç«‹æ˜¾ç¤ºã€‚

## åŠŸèƒ½ç‰¹æ€§

### ðŸ–¥ï¸ å¤šæ˜¾ç¤ºå™¨æ”¯æŒ
- **è‡ªåŠ¨æ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ«ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ˜¾ç¤ºå™¨
- **ç‹¬ç«‹æ˜¾ç¤º**ï¼šæ¯ä¸ªæ˜¾ç¤ºå™¨ç‹¬ç«‹æ˜¾ç¤ºï¼Œä¸æ‹¼æŽ¥
- **ä¸»æ˜¾ç¤ºå™¨æ ‡è¯†**ï¼šç»¿è‰²è¾¹æ¡†æ ‡è¯†ä¸»æ˜¾ç¤ºå™¨
- **ç‹¬ç«‹åˆ·æ–°**ï¼šæ¯ä¸ªæ˜¾ç¤ºå™¨å¯å•ç‹¬åˆ·æ–°
- **å…¨å±æŸ¥çœ‹**ï¼šç‚¹å‡»å›¾ç‰‡æˆ–å…¨å±æŒ‰é’®æŸ¥çœ‹

### ðŸ“Š å®žæ—¶ç›‘æŽ§
- **ç³»ç»Ÿèµ„æºç›‘æŽ§**ï¼šå®žæ—¶æ˜¾ç¤ºå†…å­˜ã€CPUä½¿ç”¨çŽ‡
- **ç½‘ç»œçŠ¶æ€ç›‘æŽ§**ï¼šæ£€æµ‹ç½‘ç»œè¿žæŽ¥è´¨é‡å’Œå»¶è¿Ÿ
- **WebSocketå®žæ—¶é€šä¿¡**ï¼šå®žæ—¶æ›´æ–°çŠ¶æ€ä¿¡æ¯
- **è‡ªåŠ¨åˆ·æ–°**ï¼šå¯è®¾ç½®è‡ªåŠ¨åˆ·æ–°é—´éš”

### ðŸ”§ è°ƒè¯•åŠŸèƒ½
- **æ˜¾ç¤ºå™¨é…ç½®æŸ¥çœ‹**ï¼šæ˜¾ç¤ºè¯¦ç»†çš„æ˜¾ç¤ºå™¨é…ç½®ä¿¡æ¯
- **å¼ºåˆ¶é‡æ–°æ£€æµ‹**ï¼šå¼ºåˆ¶é‡æ–°æ£€æµ‹æ˜¾ç¤ºå™¨é…ç½®
- **å•ä¸ªæ˜¾ç¤ºå™¨è°ƒè¯•**ï¼šå•ç‹¬æµ‹è¯•æ¯ä¸ªæ˜¾ç¤ºå™¨çš„æˆªå›¾åŠŸèƒ½
- **ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹**ï¼šæŸ¥çœ‹è¯¦ç»†çš„ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

### ðŸ“· æˆªå›¾æ”¶èµ·åŠŸèƒ½
- **é€‰æ‹©æ€§éšè—**ï¼šç”¨æˆ·å¯ä»¥ç‹¬ç«‹æ”¶èµ·/å±•å¼€æ¯ä¸ªæ˜¾ç¤ºå™¨
- **è‡ªåŠ¨æ”¶èµ·**ï¼šæ£€æµ‹åˆ°å¤šä¸ªæ˜¾ç¤ºå™¨æ—¶è‡ªåŠ¨æ”¶èµ·éžä¸»æ˜¾ç¤ºå™¨ï¼Œåªæ˜¾ç¤ºä¸»æ˜¾ç¤ºå™¨
- **æ€§èƒ½ä¼˜åŒ–**ï¼šæ”¶èµ·çš„æ˜¾ç¤ºå™¨ä¸ä¼šè¿›è¡Œæˆªå›¾èŽ·å–ï¼ŒèŠ‚çœç³»ç»Ÿèµ„æº
- **å‰åŽç«¯åŒæ­¥**ï¼šå‰ç«¯çŠ¶æ€ä¸ŽåŽç«¯çŠ¶æ€å®žæ—¶åŒæ­¥ï¼Œç¡®ä¿çœŸæ­£çš„èµ„æºèŠ‚çœ
- **ä¸€é”®é‡ç½®**ï¼šæä¾›"é‡ç½®æ”¶èµ·"æŒ‰é’®å¿«é€Ÿæ¢å¤æ‰€æœ‰æ˜¾ç¤ºå™¨
- **æ™ºèƒ½çŠ¶æ€ç®¡ç†**ï¼šæ­£ç¡®åŒºåˆ†"æ‰€æœ‰æ˜¾ç¤ºå™¨éƒ½è¢«æ”¶èµ·"å’Œ"æ²¡æœ‰æ˜¾ç¤ºå™¨æ•°æ®"çš„çŠ¶æ€

### âš¡ æ€§èƒ½ä¼˜åŒ–åŠŸèƒ½
- **æ™ºèƒ½ç¼“å­˜**ï¼šå†…å­˜ç¼“å­˜æœºåˆ¶ï¼Œé¿å…é‡å¤å¤„ç†ç›¸åŒæˆªå›¾
- **è´¨é‡è°ƒèŠ‚**ï¼šå¯è°ƒèŠ‚å›¾åƒè´¨é‡ã€å°ºå¯¸å’ŒåŽ‹ç¼©çº§åˆ«
- **æ ¼å¼é€‰æ‹©**ï¼šæ”¯æŒPNGå’ŒJPEGæ ¼å¼ï¼Œå¹³è¡¡è´¨é‡å’Œæ–‡ä»¶å¤§å°
- **ç¼“å­˜ç®¡ç†**ï¼šå®žæ—¶æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡ï¼Œæ‰‹åŠ¨æ¸…é™¤ç¼“å­˜
- **ä¼ è¾“ä¼˜åŒ–**ï¼šä¼˜åŒ–çš„å›¾åƒä¼ è¾“ç®—æ³•ï¼Œå‡å°‘ç½‘ç»œå¸¦å®½å ç”¨

## å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### ä¾èµ–åŒ…è¯´æ˜Ž
- `fastapi`: Webæ¡†æž¶
- `uvicorn`: ASGIæœåŠ¡å™¨
- `pillow`: å›¾åƒå¤„ç†
- `pywin32`: Windows APIæŽ¥å£
- `psutil`: ç³»ç»Ÿèµ„æºç›‘æŽ§

## è¿è¡Œæ–¹å¼

### æ–¹å¼1ï¼šç›´æŽ¥æ‰“å¼€HTMLæ–‡ä»¶
1. å¯åŠ¨æœåŠ¡å™¨ï¼š
   ```bash
   python server.py
   ```
2. åŒå‡»æ‰“å¼€ `index.html`
3. é¡µé¢ä¼šè‡ªåŠ¨è¿žæŽ¥åˆ° `localhost:8000`

### æ–¹å¼2ï¼šé€šè¿‡HTTPè®¿é—®
1. å¯åŠ¨æœåŠ¡å™¨ï¼š
   ```bash
   python server.py
   ```
2. æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8000`

## æœ€è¿‘ä¿®å¤

### å…¨å±çŠ¶æ€ä¿æŠ¤ä¿®å¤ (2024-12-19)
**é—®é¢˜æè¿°**ï¼šå½“æˆªå›¾è‡ªåŠ¨æ›´æ–°æ—¶ï¼Œå¦‚æžœç”¨æˆ·æ­£åœ¨å…¨å±æŸ¥çœ‹æŸä¸ªæ˜¾ç¤ºå™¨ï¼Œä¼šè‡ªåŠ¨é€€å‡ºå…¨å±æ¨¡å¼ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚

**æ ¹æœ¬åŽŸå› **ï¼š
- æˆªå›¾æ›´æ–°æ—¶ä¼šé‡æ–°è®¾ç½®å›¾ç‰‡çš„ `src` å±žæ€§
- æµè§ˆå™¨è®¤ä¸ºå›¾ç‰‡å…ƒç´ å‘ç”Ÿäº†å˜åŒ–ï¼Œè‡ªåŠ¨é€€å‡ºå…¨å±çŠ¶æ€
- è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½æ¯0.8ç§’æ›´æ–°ä¸€æ¬¡ï¼Œé¢‘ç¹è§¦å‘å…¨å±é€€å‡º
- `/screenshots/all` æŽ¥å£çš„æ»žåŽæ€§å¯¼è‡´DOMé‡å»ºæ—¶ç ´åå…¨å±çŠ¶æ€

**ä¿®å¤æ–¹æ¡ˆï¼ˆç¬¬å››ç‰ˆ - æœ€ç»ˆç‰ˆï¼‰**ï¼š
1. **DOMç»“æž„ä¿æŠ¤**ï¼šæ£€æµ‹å…¨å±çŠ¶æ€ï¼Œé¿å…é‡å»ºå¤„äºŽå…¨å±çš„DOMå…ƒç´ 
2. **æ™ºèƒ½æ›´æ–°ç­–ç•¥**ï¼šå½“æœ‰æ˜¾ç¤ºå™¨å¤„äºŽå…¨å±æ—¶ï¼Œé‡‡ç”¨ä¿å®ˆæ›´æ–°è€Œéžå®Œå…¨é‡å»º
3. **å…ƒç´ çº§ä¿æŠ¤**ï¼šåœ¨æ›´æ–°çŽ°æœ‰å…ƒç´ æ—¶æ£€æŸ¥å…¨å±çŠ¶æ€ï¼Œè·³è¿‡å…¨å±å…ƒç´ çš„æ›´æ–°
4. **çŠ¶æ€æ„ŸçŸ¥æ›´æ–°**ï¼šæ ¹æ®å…¨å±çŠ¶æ€åŠ¨æ€é€‰æ‹©æ›´æ–°ç­–ç•¥

**æŠ€æœ¯å®žçŽ°**ï¼š
- ä¿®æ”¹ `displayMultiMonitors()` å‡½æ•°ï¼Œæ·»åŠ å…¨å±çŠ¶æ€æ£€æµ‹
- æ–°å¢ž `createMonitorElement()` å‡½æ•°ç”¨äºŽåˆ›å»ºæ–°æ˜¾ç¤ºå™¨å…ƒç´ 
- æ–°å¢ž `updateExistingMonitorElement()` å‡½æ•°ç”¨äºŽå®‰å…¨æ›´æ–°çŽ°æœ‰å…ƒç´ 
- åœ¨æ›´æ–°é€»è¾‘ä¸­æ·»åŠ  `document.fullscreenElement` æ£€æŸ¥
- å…¨å±æ—¶è·³è¿‡ `img.src` æ›´æ–°ï¼Œä¿æŒåŽŸæœ‰å›¾ç‰‡ä¸å˜

**ä¿®å¤æ•ˆæžœ**ï¼š
- âœ… å…¨å±çŠ¶æ€ä¸‹ä¸ä¼šè‡ªåŠ¨é€€å‡ºå…¨å±
- âœ… ä¿æŒæˆªå›¾å®žæ—¶æ›´æ–°åŠŸèƒ½ï¼ˆéžå…¨å±æ˜¾ç¤ºå™¨ï¼‰
- âœ… è§£å†³ `/screenshots/all` æŽ¥å£æ»žåŽå¯¼è‡´çš„é€€å‡ºé—®é¢˜
- âœ… æå‡ç”¨æˆ·ä½“éªŒï¼Œé¿å…æ„å¤–é€€å‡ºå…¨å±
- âœ… å…¼å®¹æ‰€æœ‰ä¸»æµæµè§ˆå™¨
- âœ… æ— éœ€æš‚åœè‡ªåŠ¨åˆ·æ–°ï¼Œä¿æŒå®žæ—¶æ€§

### æˆªå›¾æ”¶èµ·åŠŸèƒ½çŠ¶æ€ç®¡ç†ä¿®å¤ (2024-12-19)
**é—®é¢˜æè¿°**ï¼šå½“æ‰€æœ‰æ˜¾ç¤ºå™¨éƒ½è¢«æ”¶èµ·æ—¶ï¼Œå‰ç«¯é”™è¯¯æ˜¾ç¤º"æ‰€æœ‰æ˜¾ç¤ºå™¨éƒ½å·²æ”¶èµ·"çš„å ä½ç¬¦ï¼Œå³ä½¿éƒ¨åˆ†æ˜¾ç¤ºå™¨åªæ˜¯è¢«æ”¶èµ·è€Œä¸æ˜¯çœŸæ­£æ¶ˆå¤±ã€‚

**æ ¹æœ¬åŽŸå› **ï¼š
- `/screenshots/all` æŽ¥å£åªè¿”å›žæœªæ”¶èµ·çš„æ˜¾ç¤ºå™¨æ•°æ®
- å‰ç«¯é”™è¯¯åœ°å°†è¿”å›žçš„æ˜¾ç¤ºå™¨æ•°é‡ä½œä¸ºæ€»æ˜¾ç¤ºå™¨æ•°é‡
- å¯¼è‡´ `areAllMonitorsCollapsed()` å‡½æ•°æ— æ³•æ­£ç¡®åˆ¤æ–­çŠ¶æ€

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
1. **åŽç«¯ä¿®æ”¹**ï¼š`/screenshots/all` æŽ¥å£æ–°å¢ž `total_monitor_count` å­—æ®µï¼Œè¿”å›žç³»ç»Ÿä¸­çš„æ€»æ˜¾ç¤ºå™¨æ•°é‡
2. **å‰ç«¯ä¿®æ”¹**ï¼šä½¿ç”¨APIè¿”å›žçš„ `total_monitor_count` è€Œä¸æ˜¯å½“å‰æ´»è·ƒæ˜¾ç¤ºå™¨æ•°é‡æ¥åˆ¤æ–­çŠ¶æ€
3. **é€»è¾‘ä¼˜åŒ–**ï¼šæ­£ç¡®å¤„ç†ç©ºæ•°ç»„å“åº”ï¼ŒåŒºåˆ†"å…¨éƒ¨æ”¶èµ·"å’Œ"æ— æ•°æ®"çŠ¶æ€

**ä¿®å¤æ•ˆæžœ**ï¼š
- âœ… æ­£ç¡®è¯†åˆ«æ‰€æœ‰æ˜¾ç¤ºå™¨éƒ½è¢«æ”¶èµ·çš„çŠ¶æ€
- âœ… é¿å…è¯¯åˆ¤å¯¼è‡´çš„UIæ˜¾ç¤ºé”™è¯¯
- âœ… ä¿æŒæ€§èƒ½ä¼˜åŒ–æ•ˆæžœï¼ˆæ”¶èµ·çš„æ˜¾ç¤ºå™¨ä¸èŽ·å–æˆªå›¾ï¼‰

## APIæŽ¥å£

### åŸºç¡€æŽ¥å£
- `GET /` - ä¸»é¡µ
- `GET /status` - æœåŠ¡å™¨çŠ¶æ€
- `GET /screenshot` - èŽ·å–æ¡Œé¢æˆªå›¾

### å¤šæ˜¾ç¤ºå™¨æŽ¥å£
- `GET /screenshots/all` - èŽ·å–æ‰€æœ‰æ˜¾ç¤ºå™¨æˆªå›¾ï¼ˆè·³è¿‡è¢«æ”¶èµ·çš„æ˜¾ç¤ºå™¨ï¼Œè¿”å›ž `total_monitor_count` å­—æ®µï¼‰
- `GET /screenshot/monitor/{monitor_index}` - èŽ·å–æŒ‡å®šæ˜¾ç¤ºå™¨æˆªå›¾ï¼ˆæ£€æŸ¥æ”¶èµ·çŠ¶æ€ï¼‰
- `GET /monitors/config` - èŽ·å–æ˜¾ç¤ºå™¨é…ç½®ä¿¡æ¯
- `POST /collapsed-monitors` - æ›´æ–°è¢«æ”¶èµ·çš„æ˜¾ç¤ºå™¨çŠ¶æ€
- `GET /collapsed-monitors` - èŽ·å–å½“å‰è¢«æ”¶èµ·çš„æ˜¾ç¤ºå™¨çŠ¶æ€

### ç›‘æŽ§æŽ¥å£
- `GET /system-info` - èŽ·å–ç³»ç»Ÿèµ„æºä¿¡æ¯
- `GET /test-network` - æµ‹è¯•ç½‘ç»œè¿žæŽ¥
- `GET /force-redetect` - å¼ºåˆ¶é‡æ–°æ£€æµ‹æ˜¾ç¤ºå™¨

### è°ƒè¯•æŽ¥å£
- `GET /debug/monitor/{monitor_index}` - è°ƒè¯•æŒ‡å®šæ˜¾ç¤ºå™¨
- `GET /screenshot-info` - èŽ·å–æˆªå›¾è¯¦ç»†ä¿¡æ¯

### æ€§èƒ½ä¼˜åŒ–æŽ¥å£
- `GET /quality-settings` - èŽ·å–å½“å‰è´¨é‡è®¾ç½®
- `POST /quality-settings` - æ›´æ–°è´¨é‡è®¾ç½®
- `GET /cache-stats` - èŽ·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯
- `POST /clear-cache` - æ¸…é™¤å›¾åƒç¼“å­˜

### WebSocket
- `WS /ws` - å®žæ—¶çŠ¶æ€æŽ¨é€

## ç³»ç»Ÿç›‘æŽ§åŠŸèƒ½

### å†…å­˜ç›‘æŽ§
- å®žæ—¶å†…å­˜ä½¿ç”¨çŽ‡
- æ€»å†…å­˜ã€å·²ç”¨å†…å­˜ã€å¯ç”¨å†…å­˜
- è‡ªåŠ¨æ›´æ–°ï¼ˆæ¯5ç§’ï¼‰

### CPUç›‘æŽ§
- å®žæ—¶CPUä½¿ç”¨çŽ‡
- CPUæ ¸å¿ƒæ•°ã€é¢‘çŽ‡
- è‡ªåŠ¨æ›´æ–°ï¼ˆæ¯5ç§’ï¼‰

### ç£ç›˜ç›‘æŽ§
- ç£ç›˜ä½¿ç”¨çŽ‡
- æ€»å®¹é‡ã€å·²ç”¨ç©ºé—´ã€å¯ç”¨ç©ºé—´
- è‡ªåŠ¨æ›´æ–°ï¼ˆæ¯5ç§’ï¼‰

### ç½‘ç»œç›‘æŽ§
- ç½‘ç»œè¿žæŽ¥çŠ¶æ€
- ç½‘ç»œå»¶è¿Ÿ
- è‡ªåŠ¨æ›´æ–°ï¼ˆæ¯30ç§’ï¼‰

## æˆªå›¾æ”¶èµ·åŠŸèƒ½è¯¦è§£

### åŠŸèƒ½æ¦‚è¿°
æˆªå›¾æ”¶èµ·åŠŸèƒ½å…è®¸ç”¨æˆ·éšè—ç‰¹å®šæ˜¾ç¤ºå™¨çš„å®žæ—¶æˆªå›¾ï¼Œä»¥æé«˜ç³»ç»Ÿå“åº”é€Ÿåº¦å’ŒèŠ‚çœèµ„æºã€‚è¯¥åŠŸèƒ½åŒæ—¶åœ¨å‰ç«¯å’ŒåŽç«¯å®žçŽ°ï¼Œç¡®ä¿çœŸæ­£çš„æ€§èƒ½ä¼˜åŒ–ã€‚

### ä½¿ç”¨æ–¹æ³•
1. **æ”¶èµ·æ˜¾ç¤ºå™¨**: ç‚¹å‡»æ˜¾ç¤ºå™¨æŽ§åˆ¶æ ä¸­çš„"ðŸ“· æ”¶èµ·"æŒ‰é’®
2. **å±•å¼€æ˜¾ç¤ºå™¨**: ç‚¹å‡»æ˜¾ç¤ºå™¨æŽ§åˆ¶æ ä¸­çš„"ðŸ‘ï¸ å±•å¼€"æŒ‰é’®
3. **é‡ç½®æ‰€æœ‰**: ç‚¹å‡»é¡µé¢é¡¶éƒ¨çš„"ðŸ”„ é‡ç½®æ”¶èµ·"æŒ‰é’®
4. **è‡ªåŠ¨æ”¶èµ·**: å½“æ£€æµ‹åˆ°å¤šä¸ªæ˜¾ç¤ºå™¨æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ”¶èµ·éžä¸»æ˜¾ç¤ºå™¨ï¼Œåªæ˜¾ç¤ºä¸»æ˜¾ç¤ºå™¨

### æŠ€æœ¯å®žçŽ°

#### å‰ç«¯å®žçŽ°
- **çŠ¶æ€ç®¡ç†**: ä½¿ç”¨ `Set` æ•°æ®ç»“æž„ (`collapsedMonitors`) é«˜æ•ˆè·Ÿè¸ªæ”¶èµ·çŠ¶æ€
- **UIæ›´æ–°**: æ”¶èµ·çŠ¶æ€ä¸‹æ˜¾ç¤ºå ä½å›¾ç‰‡ï¼Œéšè—å®žé™…æˆªå›¾
- **çŠ¶æ€åŒæ­¥**: æ¯æ¬¡çŠ¶æ€å˜æ›´éƒ½ä¼šç«‹å³åŒæ­¥åˆ°åŽç«¯
- **å®‰å…¨æ£€æŸ¥**: æ”¶èµ·çŠ¶æ€ä¸‹ç¦ç”¨åˆ·æ–°å’Œå…¨å±åŠŸèƒ½

#### åŽç«¯å®žçŽ°
- **çŠ¶æ€è·Ÿè¸ª**: ä½¿ç”¨å…¨å±€ `set()` æ•°æ®ç»“æž„ (`collapsed_monitors`) è·Ÿè¸ªæ”¶èµ·çŠ¶æ€
- **æˆªå›¾è¿‡æ»¤**: `/screenshots/all` æŽ¥å£è·³è¿‡è¢«æ”¶èµ·æ˜¾ç¤ºå™¨çš„æˆªå›¾èŽ·å–
- **å•æ˜¾ç¤ºå™¨æ£€æŸ¥**: `/screenshot/monitor/{index}` æŽ¥å£æ£€æŸ¥æ˜¾ç¤ºå™¨æ˜¯å¦è¢«æ”¶èµ·
- **çŠ¶æ€åŒæ­¥**: æä¾› RESTful API è¿›è¡Œå‰åŽç«¯çŠ¶æ€åŒæ­¥

#### æ€§èƒ½ä¼˜åŒ–
- **å‰ç«¯ä¼˜åŒ–**: æ”¶èµ·çŠ¶æ€ä¸‹è·³è¿‡æˆªå›¾æ˜¾ç¤ºï¼Œå‡å°‘ DOM æ“ä½œ
- **åŽç«¯ä¼˜åŒ–**: æ”¶èµ·çŠ¶æ€ä¸‹è·³è¿‡æˆªå›¾èŽ·å–ï¼Œå‡å°‘ CPU å’Œå†…å­˜ä½¿ç”¨
- **æ•°æ®ä¼ è¾“**: ä½¿ç”¨å ä½å›¾ç‰‡æ›¿ä»£å®žé™…æˆªå›¾ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“

### è‡ªåŠ¨æ”¶èµ·åŠŸèƒ½
- **æ™ºèƒ½æ£€æµ‹**: ç³»ç»Ÿé¦–æ¬¡æ£€æµ‹åˆ°å¤šä¸ªæ˜¾ç¤ºå™¨æ—¶ï¼Œè‡ªåŠ¨æ”¶èµ·éžä¸»æ˜¾ç¤ºå™¨
- **æ€§èƒ½ä¼˜å…ˆ**: é»˜è®¤åªæ˜¾ç¤ºä¸»æ˜¾ç¤ºå™¨ï¼Œå‡å°‘èµ„æºæ¶ˆè€—
- **ç”¨æˆ·æŽ§åˆ¶**: ç”¨æˆ·å¯éšæ—¶å±•å¼€å…¶ä»–æ˜¾ç¤ºå™¨æˆ–é‡ç½®æ”¶èµ·çŠ¶æ€
- **çŠ¶æ€ä¿æŒ**: è‡ªåŠ¨æ”¶èµ·çŠ¶æ€ä¼šä¿æŒåˆ°ç”¨æˆ·æ‰‹åŠ¨é‡ç½®ä¸ºæ­¢

### æ³¨æ„äº‹é¡¹
- æ”¶èµ·çŠ¶æ€ä»…åœ¨å½“å‰ä¼šè¯ä¸­ä¿æŒï¼Œé¡µé¢åˆ·æ–°åŽä¼šé‡ç½®
- åŽç«¯çŠ¶æ€ä¼šåœ¨æœåŠ¡å™¨é‡å¯åŽé‡ç½®
- å»ºè®®åœ¨ä¸éœ€è¦æŸ¥çœ‹ç‰¹å®šæ˜¾ç¤ºå™¨æ—¶ä½¿ç”¨æ”¶èµ·åŠŸèƒ½ä»¥æå‡æ€§èƒ½
- è‡ªåŠ¨æ”¶èµ·åŠŸèƒ½ä»…åœ¨é¦–æ¬¡æ£€æµ‹åˆ°å¤šä¸ªæ˜¾ç¤ºå™¨æ—¶æ‰§è¡Œï¼Œé¿å…é‡å¤æ”¶èµ·

## æ€§èƒ½ä¼˜åŒ–åŠŸèƒ½è¯¦è§£

### åŠŸèƒ½æ¦‚è¿°
æ€§èƒ½ä¼˜åŒ–åŠŸèƒ½é€šè¿‡å¤šç§æŠ€æœ¯æ‰‹æ®µæå‡æˆªå›¾ä¼ è¾“é€Ÿåº¦å’Œç³»ç»Ÿå“åº”æ€§èƒ½ï¼ŒåŒ…æ‹¬æ™ºèƒ½ç¼“å­˜ã€è´¨é‡è°ƒèŠ‚ã€æ ¼å¼ä¼˜åŒ–ç­‰ã€‚

### æ™ºèƒ½ç¼“å­˜æœºåˆ¶
- **å†…å­˜ç¼“å­˜**ï¼šå°†å¤„ç†è¿‡çš„å›¾åƒç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œé¿å…é‡å¤å¤„ç†
- **ç¼“å­˜é”®ç”Ÿæˆ**ï¼šåŸºäºŽæ˜¾ç¤ºå™¨ç´¢å¼•å’Œè´¨é‡è®¾ç½®ç”Ÿæˆå”¯ä¸€ç¼“å­˜é”®
- **è‡ªåŠ¨æ¸…ç†**ï¼šç¼“å­˜é¡¹æœ‰è¿‡æœŸæ—¶é—´ï¼Œè‡ªåŠ¨æ¸…ç†è¿‡æœŸå’Œè¶…é‡çš„é¡¹ç›®
- **ç¼“å­˜ç»Ÿè®¡**ï¼šå®žæ—¶æ˜¾ç¤ºç¼“å­˜å‘½ä¸­çŽ‡å’Œä½¿ç”¨æƒ…å†µ

### è´¨é‡è®¾ç½®é€‰é¡¹
- **å›¾åƒå°ºå¯¸**ï¼šå¯è°ƒèŠ‚å•æ˜¾ç¤ºå™¨å’Œæ¡Œé¢æˆªå›¾çš„æœ€å¤§å°ºå¯¸
- **å›¾åƒæ ¼å¼**ï¼šæ”¯æŒPNGï¼ˆé«˜è´¨é‡ï¼‰å’ŒJPEGï¼ˆå°æ–‡ä»¶ï¼‰æ ¼å¼
- **è´¨é‡å‚æ•°**ï¼šPNGè´¨é‡ï¼ˆ1-100ï¼‰ã€JPEGè´¨é‡ï¼ˆ1-100ï¼‰ã€PNGåŽ‹ç¼©çº§åˆ«ï¼ˆ0-9ï¼‰
- **ä¼˜åŒ–é€‰é¡¹**ï¼šå¯ç”¨PNGä¼˜åŒ–ä»¥å‡å°æ–‡ä»¶å¤§å°

### ä½¿ç”¨æ–¹æ³•
1. **è´¨é‡è®¾ç½®**ï¼šç‚¹å‡»"âš™ï¸ è´¨é‡è®¾ç½®"æŒ‰é’®æ‰“å¼€è®¾ç½®é¢æ¿
2. **ç¼“å­˜ç®¡ç†**ï¼šç‚¹å‡»"ðŸ’¾ ç¼“å­˜ç®¡ç†"æŒ‰é’®æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡
3. **å®žæ—¶è°ƒèŠ‚**ï¼šåœ¨è®¾ç½®é¢æ¿ä¸­è°ƒèŠ‚å„é¡¹å‚æ•°ï¼Œå®žæ—¶é¢„è§ˆæ•ˆæžœ
4. **ä¿å­˜è®¾ç½®**ï¼šç‚¹å‡»"ä¿å­˜è®¾ç½®"åº”ç”¨æ–°çš„è´¨é‡é…ç½®

### æ€§èƒ½æå‡æ•ˆæžœ
- **ä¼ è¾“é€Ÿåº¦**ï¼šç¼“å­˜å‘½ä¸­æ—¶å¯æå‡50-80%çš„å“åº”é€Ÿåº¦
- **æ–‡ä»¶å¤§å°**ï¼šJPEGæ ¼å¼å¯æ¯”PNGå‡å°‘60-80%çš„æ–‡ä»¶å¤§å°
- **ç½‘ç»œå¸¦å®½**ï¼šä¼˜åŒ–çš„åŽ‹ç¼©ç®—æ³•å¯å‡å°‘30-50%çš„å¸¦å®½å ç”¨
- **ç³»ç»Ÿèµ„æº**ï¼šé¿å…é‡å¤å¤„ç†å¯å‡å°‘CPUå’Œå†…å­˜ä½¿ç”¨

### æœ€ä½³å®žè·µ
- **ç½‘ç»œçŽ¯å¢ƒå·®**ï¼šä½¿ç”¨JPEGæ ¼å¼ï¼Œé™ä½Žè´¨é‡åˆ°60-80
- **ç½‘ç»œçŽ¯å¢ƒå¥½**ï¼šä½¿ç”¨PNGæ ¼å¼ï¼Œä¿æŒé«˜è´¨é‡
- **å¤šæ˜¾ç¤ºå™¨**ï¼šé€‚å½“é™ä½Žå›¾åƒå°ºå¯¸ä»¥æå‡æ€§èƒ½
- **é¢‘ç¹åˆ·æ–°**ï¼šä¿æŒç¼“å­˜å¼€å¯ä»¥èŽ·å¾—æœ€ä½³æ€§èƒ½

## æŠ€æœ¯æž¶æž„

### åŽç«¯ (Python)
- **FastAPI**: çŽ°ä»£ã€å¿«é€Ÿçš„Webæ¡†æž¶
- **WebSocket**: å®žæ—¶åŒå‘é€šä¿¡
- **win32api**: Windowsç³»ç»ŸAPIè°ƒç”¨
- **PIL**: å›¾åƒå¤„ç†å’Œæˆªå›¾
- **psutil**: ç³»ç»Ÿèµ„æºç›‘æŽ§

### å‰ç«¯ (HTML/CSS/JavaScript)
- **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- **å®žæ—¶æ›´æ–°**: WebSocketå®žæ—¶é€šä¿¡
- **å¤šæ˜¾ç¤ºå™¨å¸ƒå±€**: ç½‘æ ¼å¸ƒå±€æ˜¾ç¤ºå¤šä¸ªæ˜¾ç¤ºå™¨
- **äº¤äº’å¼æŽ§åˆ¶**: ä¸°å¯Œçš„ç”¨æˆ·äº¤äº’åŠŸèƒ½

## æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

1. **æ˜¾ç¤ºå™¨æ£€æµ‹ä¸å‡†ç¡®**
   - ç‚¹å‡»"å¼ºåˆ¶é‡æ–°æ£€æµ‹"æŒ‰é’®
   - æ£€æŸ¥Windowsæ˜¾ç¤ºè®¾ç½®
   - æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—èŽ·å–è¯¦ç»†ä¿¡æ¯

2. **æˆªå›¾æ˜¾ç¤ºä¸å…¨**
   - è¿è¡Œè¯Šæ–­è„šæœ¬ï¼š`python deep_diagnosis.py`
   - æ£€æŸ¥æ˜¾ç¤ºå™¨é…ç½®ä¿¡æ¯
   - ç¡®è®¤æ˜¾ç¤ºå™¨æŽ’åˆ—è®¾ç½®

3. **ç³»ç»Ÿç›‘æŽ§æ•°æ®å¼‚å¸¸**
   - æ£€æŸ¥psutilæ˜¯å¦æ­£ç¡®å®‰è£…
   - ç¡®è®¤æœ‰è¶³å¤Ÿçš„ç³»ç»Ÿæƒé™
   - æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

### è°ƒè¯•å·¥å…·

- **æ·±åº¦è¯Šæ–­è„šæœ¬**: `python deep_diagnosis.py`
- **æ˜¾ç¤ºå™¨æµ‹è¯•è„šæœ¬**: `python test_monitor_capture.py`
- **å‰ç«¯è°ƒè¯•æŒ‰é’®**: ä½¿ç”¨ç•Œé¢ä¸Šçš„è°ƒè¯•åŠŸèƒ½

## å¼€å‘è¯´æ˜Ž

### é¡¹ç›®ç»“æž„
```
second-sight/
â”œâ”€â”€ server.py              # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ index.html             # å‰ç«¯ç•Œé¢
â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”œâ”€â”€ README.md             # é¡¹ç›®è¯´æ˜Ž
â”œâ”€â”€ deep_diagnosis.py     # æ·±åº¦è¯Šæ–­è„šæœ¬
â”œâ”€â”€ test_monitor_capture.py # æ˜¾ç¤ºå™¨æµ‹è¯•è„šæœ¬
â””â”€â”€ start_server.bat      # å¯åŠ¨è„šæœ¬
```

### æ‰©å±•åŠŸèƒ½
- æ”¯æŒæ›´å¤šæ˜¾ç¤ºå™¨é…ç½®
- æ·»åŠ æ›´å¤šç³»ç»Ÿç›‘æŽ§æŒ‡æ ‡
- å®žçŽ°è¿œç¨‹æŽ§åˆ¶åŠŸèƒ½
- æ·»åŠ ç”¨æˆ·è®¤è¯å’Œæƒé™æŽ§åˆ¶

## è®¸å¯è¯

MIT License 



TBD
1. æ–‡ä»¶ç®¡ç†â€œå·²é€‰æ‹©â€æŒ‰é’®æ–‡æœ¬è°ƒæ•´-->Done
2. æ–‡ä»¶ç®¡ç†è¦å±•ç¤ºæ–‡ä»¶å¤¹ï¼Ÿ-->ä¸-->Done
3. å¼¹çª—è¦å±•ç¤ºæ–‡ä»¶ï¼Ÿ-->ä¸-->Done
4. ä¸Šä¸€çº§ç›®å½•é€»è¾‘è¦ä¼˜åŒ–-->Done
5. ç‚¹å‡»è·³è½¬æ ¹ç›®å½•æŒ‰é’®ï¼Œloading?æˆ–è€…ç›®å½•å…ƒç´ è¦é©¬ä¸Šå˜æˆ–è€… loading-->Done
6. æ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ•°é‡ count æŒ‡ç¤ºè°ƒæ•´-->Done
7. ä¼˜åŒ–ä¸Šçº§ç›®å½•ã€æ ¹ç›®å½•å…¥å£ä¸Žé€»è¾‘-->Done
8. æ–°å¢žé»˜è®¤å…¥å£ä¸Žé€»è¾‘-->Done
9. ä¼˜åŒ–åˆ·æ–°é€»è¾‘-->Done
10. æ–‡ä»¶é€‰ä¸­åŽé€»è¾‘ä¼˜åŒ–-->Done
11. æ–‡ä»¶é€‰ä¸­åŽå†æ¬¡ç‚¹å‡»è¦æ”¹ä¸ºæœªé€‰ä¸­-->Done
12. å¢žåŠ æ–‡ä»¶å¤¹åˆ é™¤å…¥å£ä¸ŽåŠŸèƒ½-->Done
13. å¢žåŠ æ–°å¢žæ–‡ä»¶å¤¹å…¥å£ä¸ŽåŠŸèƒ½-->Done
14. ä¿®å¤æ–°å¢žæ–‡ä»¶å¤¹ä¸€ç›´æ”¾åœ¨ Downloads æ–‡ä»¶å¤¹ä¸‹çš„é—®é¢˜-->Done
15. æ–‡ä»¶è·¯å¾„è¦æ”¹ä¸ºå¯å¤åˆ¶-->Done
16. ä¿®å¤ä¸Šçº§ç›®å½•åŠŸèƒ½(é’ˆå¯¹æ— æƒè®¿é—®çš„ç›®å½•)-->Done
17. å½“æœ‰äº›ç›˜è¶…æ—¶ï¼Œåªè¿”å›žæœªè¶…æ—¶çš„é‚£äº›ç›˜ç¬¦--Done
18. ç§»é™¤å‰ç«¯è°ƒè¯•æ—¥å¿—ï¼›-->Done
19. æ–°å»ºæ–‡ä»¶å¤¹æŒ‰é’®ä½ç½®è°ƒæ•´ï¼›-->Done
20. ç³»ç»Ÿç›˜ç¬¦çš„â€œè¿›å…¥â€åŠŸèƒ½ï¼›--Done
21. ä¿®å¤åœ¨æˆ‘çš„ç”µè„‘ä¸‹ç‚¹å‡»åˆ·æ–°æŒ‰é’®ä¼šåœ¨æ–‡ä»¶å¤¹åˆ—è¡¨ä¸­å¤šå‡ºâ€œæˆ‘çš„ç”µè„‘â€ä¸€é¡¹çš„é—®é¢˜-->Done
22. å¼€å§‹è‡ªåŠ¨åˆ·æ–°+åœæ­¢è‡ªåŠ¨åˆ·æ–°ï¼Œä¸¤ä¸ªæŒ‰é’®åˆäºŒä¸ºä¸€-->Done
23. ä¿®å¤ bug: æ”¶èµ·æˆªå›¾åŽè¿˜ä¼šåˆ·æ–°æˆªå›¾ï¼›-->Done
24. å›¾ç‰‡åŠ è½½å¤ªä¹…ï¼Œè¦ä¼˜åŒ–ï¼Œå¦‚åŽ‹ç¼©ï¼›-->Done
25. å…¨å±æ—¶ç”±äºŽæˆªå›¾æ›´æ–°ä¼šè‡ªåŠ¨é€€å‡ºå…¨å±ï¼›-->Done
26. ä¿®æ”¹"è´¨é‡è®¾ç½®"æŒ‰é’®çš„æ ·å¼ï¼›-->Done
27. ä¿®å¤æ”¶èµ·åŠŸèƒ½ï¼šæ”¶èµ·æ—¶ä¿ç•™æ˜¾ç¤ºå™¨å…ƒç´ ï¼Œç¡®ä¿å‰¯æ˜¾ç¤ºå±å¯è§ï¼›-->Done

26. js æ–‡ä»¶å¤ªå¤§ï¼Œéœ€è¦æå–å…¬å…±æ–¹æ³•ã€åˆ†å‰²ä¸ºå‡ ä¸ª js æ–‡ä»¶ï¼›-->Doing
27. é”®é¼ æ“ä½œ-->ä¼˜å…ˆçº§é«˜
28. éƒ¨ç½²-->ä¼˜å…ˆçº§ä½Ž
29. å½•åˆ¶å±å¹•ä¸Žä¸‹è½½-->ä¼˜å…ˆçº§ä½Ž
